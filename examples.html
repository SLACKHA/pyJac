
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Examples &#8212; pyJac 1.0.6 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installing.html" />
    <link rel="prev" title="FAQs" href="faqs.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>Some example input files are included in the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
<p>After installing pyJac, or in the package directory, you can see all of the
usage options with a standard <code class="docutils literal notranslate"><span class="pre">--help</span></code> or <code class="docutils literal notranslate"><span class="pre">-h</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac --help
</pre></div>
</div>
<div class="section" id="jacobian-file-generation">
<h2>Jacobian file generation<a class="headerlink" href="#jacobian-file-generation" title="Permalink to this headline">¶</a></h2>
<p>To generate the Jacobian source files for a hydrogen-air system in C (without
any cache optimization):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac --lang c --input data/h2o2.inp
</pre></div>
</div>
<p>CUDA source code can be generated similarly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac --lang cuda --input data/h2o2.inp
</pre></div>
</div>
</div>
<div class="section" id="functional-testing">
<h2>Functional testing<a class="headerlink" href="#functional-testing" title="Permalink to this headline">¶</a></h2>
<p>Functional testing (i.e., testing whether pyJac gives the correct results)
requires thermochemical state data. This can be generated using the built-in
partially stirred reactor (PaSR) module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac.functional_tester.partially_stirred_reactor <span class="se">\</span>
--mech data/h2o2.cti --input data/pasr_input.yaml <span class="se">\</span>
--output h2_pasr_output.npy
</pre></div>
</div>
<p>Then, functional testing using this data can be performed via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac.functional_tester --mech data/h2o2.cti --lang c <span class="se">\</span>
--pasr_output h2_pasr_output.npy
</pre></div>
</div>
<p><strong>Alternatively</strong>, you can perform the test using provided example data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac.functional_tester --mech data/h2o2.cti --lang c <span class="se">\</span>
--pasr_output data/h2_pasr_output.npy
</pre></div>
</div>
<p>Detailed error statistics are saved in <code class="docutils literal notranslate"><span class="pre">error_arrays.npz</span></code>, and overall results
printed to screen.</p>
</div>
<div class="section" id="performance-testing">
<h2>Performance testing<a class="headerlink" href="#performance-testing" title="Permalink to this headline">¶</a></h2>
<p>The performance of the analytical Jacobian matrix evaluation using pyJac can be
tested against finite differencing and TChem. With the appropriate environment
established, this test can be performed by giving only two arguments: a base
directory and a number of OpenMP threads to use. The program scans for
subdirectories in the base directory, looking for the following keys:</p>
<blockquote>
<div><ul class="simple">
<li>A Cantera mechanism (ending with .cti)</li>
<li>A Chemkin mechanism of the same name (ending with .dat)</li>
<li>An (optional) Chemkin thermodynamic file (with “therm” in filename)
if required. If the thermo file is not specified, the mechanism is assumed
to contain the thermo data.</li>
<li>Thermochemical state data (as generated previously using the PaSR module)
files ending with <code class="docutils literal notranslate"><span class="pre">*.npy</span></code></li>
</ul>
</div></blockquote>
<p>Note that all <code class="docutils literal notranslate"><span class="pre">*.npy</span></code> files in a directory will be used for testing purposes.</p>
<p>The performance tester can be called using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac.performance_tester -w data/
</pre></div>
</div>
</div>
<div class="section" id="library-generation">
<h2>Library Generation<a class="headerlink" href="#library-generation" title="Permalink to this headline">¶</a></h2>
<p>pyJac also has the ability to generate shared / static libraries for
linkage to external programs.  This functionality is available via the
<a class="reference internal" href="src/pyjac.libgen.html#module-pyjac.libgen" title="pyjac.libgen"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyjac.libgen</span></code></a> submodule, and requires a gcc/nvcc installation available
on the path.  It can be called as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac.libgen --source_dir /path/to/generated/pyjac/output <span class="se">\</span>
       --lang cuda --static
</pre></div>
</div>
<p>Note that for linkage into an external program, CUDA requires use of a
static library.</p>
</div>
<div class="section" id="python-wrapper-generation">
<h2>Python Wrapper Generation<a class="headerlink" href="#python-wrapper-generation" title="Permalink to this headline">¶</a></h2>
<p>In addition to the library generation described above, pyJac can directly
generate a python wrapper for chemical source term / Jacobian evaluation
(among others) directly from python.  This functionality can be called
via (e.g.,):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pyjac.pywrap --source_dir /path/to/generated/pyjac/output <span class="se">\</span>
       --lang cuda
</pre></div>
</div>
<p>For details of the functions included in the python wrapper, look at the
.pyx files in <a class="reference internal" href="src/pyjac.pywrap.html#module-pyjac.pywrap" title="pyjac.pywrap"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyjac.pywrap</span></code></a>, or the calls in
<a class="reference internal" href="src/pyjac.functional_tester.test.html#pyjac.functional_tester.test.cpyjac_evaluator" title="pyjac.functional_tester.test.cpyjac_evaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyjac.functional_tester.test.cpyjac_evaluator</span></code></a></p>
</div>
<div class="section" id="using-the-python-interface">
<h2>Using the Python Interface<a class="headerlink" href="#using-the-python-interface" title="Permalink to this headline">¶</a></h2>
<p>Once generated, the python wrapper can be imported from a python script in
the same directory, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyjacob</span>
</pre></div>
</div>
<p>Then the <code class="xref py py-func docutils literal notranslate"><span class="pre">dydt()</span></code> or <code class="xref py py-func docutils literal notranslate"><span class="pre">eval_jacob()</span></code> functions can be called, e.g. for
the GRI-Mech 3.0 model as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyjacob</span>
<span class="kn">import</span> <span class="nn">cantera</span> <span class="kn">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1">#create gas from original mechanism file gri30.cti</span>
<span class="n">gas</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Solution</span><span class="p">(</span><span class="s1">&#39;gri30.cti&#39;</span><span class="p">)</span>
<span class="c1">#reorder the gas to match pyJac</span>
<span class="n">n2_ind</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">species_index</span><span class="p">(</span><span class="s1">&#39;N2&#39;</span><span class="p">)</span>
<span class="n">specs</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">species</span><span class="p">()[:]</span>
<span class="n">gas</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Solution</span><span class="p">(</span><span class="n">thermo</span><span class="o">=</span><span class="s1">&#39;IdealGas&#39;</span><span class="p">,</span> <span class="n">kinetics</span><span class="o">=</span><span class="s1">&#39;GasKinetics&#39;</span><span class="p">,</span>
        <span class="n">species</span><span class="o">=</span><span class="n">specs</span><span class="p">[:</span><span class="n">n2_ind</span><span class="p">]</span> <span class="o">+</span> <span class="n">specs</span><span class="p">[</span><span class="n">n2_ind</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="p">[</span><span class="n">specs</span><span class="p">[</span><span class="n">n2_ind</span><span class="p">]],</span>
        <span class="n">reactions</span><span class="o">=</span><span class="n">gas</span><span class="o">.</span><span class="n">reactions</span><span class="p">())</span>

<span class="c1">#set the gas state</span>
<span class="n">T</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">one_atm</span>
<span class="n">gas</span><span class="o">.</span><span class="n">TPY</span> <span class="o">=</span> <span class="n">T</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="s2">&quot;CH4:1.0, O2:2, N2:7.52&quot;</span>

<span class="c1">#setup the state vector</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">)</span>
<span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">T</span>
<span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">Y</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="c1">#create a dydt vector</span>
<span class="n">dydt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">pyjacob</span><span class="o">.</span><span class="n">py_dydt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dydt</span><span class="p">)</span>

<span class="c1">#create a jacobian vector</span>
<span class="n">jac</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">gas</span><span class="o">.</span><span class="n">n_species</span> <span class="o">*</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">)</span>

<span class="c1">#evaluate the Jacobian</span>
<span class="n">pyjacob</span><span class="o">.</span><span class="n">py_eval_jacobian</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">jac</span><span class="p">)</span>
</pre></div>
</div>
<p>The above uses the state vector discussed in (<a class="reference internal" href="faqs.html#ordering"><span class="std std-ref">What state vector should I pass into pyJac?</span></a>), as well as the
reordering in (<a class="reference internal" href="faqs.html#cantera-comp"><span class="std std-ref">What does this mean for comparison to say, Cantera?</span></a>) to enable direct comparison to Cantera.
Also note that we can pass a dummy time of 0, as explained in
(<a class="reference internal" href="faqs.html#param-names"><span class="std std-ref">What is the difference between “t” and “T” in the Python interface?</span></a>).</p>
<p>The CUDA interface is less modular, and currently only supports evaluating the
Jacobian directly (which in turn populates the other values).  For example,
if we have 1000 states to evaluate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cu_pyjacob</span>
<span class="kn">import</span> <span class="nn">cantera</span> <span class="kn">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1">#create gas from original mechanism file gri30.cti</span>
<span class="n">gas</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Solution</span><span class="p">(</span><span class="s1">&#39;gri30.cti&#39;</span><span class="p">)</span>
<span class="c1">#reorder the gas to match pyJac</span>
<span class="n">n2_ind</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">species_index</span><span class="p">(</span><span class="s1">&#39;N2&#39;</span><span class="p">)</span>
<span class="n">specs</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">species</span><span class="p">()[:]</span>
<span class="n">gas</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Solution</span><span class="p">(</span><span class="n">thermo</span><span class="o">=</span><span class="s1">&#39;IdealGas&#39;</span><span class="p">,</span> <span class="n">kinetics</span><span class="o">=</span><span class="s1">&#39;GasKinetics&#39;</span><span class="p">,</span>
        <span class="n">species</span><span class="o">=</span><span class="n">specs</span><span class="p">[:</span><span class="n">n2_ind</span><span class="p">]</span> <span class="o">+</span> <span class="n">specs</span><span class="p">[</span><span class="n">n2_ind</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="p">[</span><span class="n">specs</span><span class="p">[</span><span class="n">n2_ind</span><span class="p">]],</span>
        <span class="n">reactions</span><span class="o">=</span><span class="n">gas</span><span class="o">.</span><span class="n">reactions</span><span class="p">())</span>

<span class="n">N_state</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="c1">#setup the state vectors</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">))</span>
<span class="n">pres</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N_state</span><span class="p">)</span>

<span class="c1">#populate with dummy data</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N_state</span><span class="p">):</span>
    <span class="c1">#use cantera to normalize mass fractions</span>
    <span class="n">gas</span><span class="o">.</span><span class="n">TPY</span> <span class="o">=</span> <span class="mi">2400</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(),</span> <span class="mi">25</span> <span class="o">*</span> <span class="n">ct</span><span class="o">.</span><span class="n">one_atm</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(),</span> \
        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">)</span>

    <span class="c1">#set state</span>
    <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">T</span>
    <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">Y</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">pres</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">P</span>

<span class="c1">#flatten</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>

<span class="c1">#find # of reversible reactions</span>
<span class="n">num_rev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">rxn</span><span class="o">.</span><span class="n">reversible</span>
                            <span class="k">for</span> <span class="n">rxn</span> <span class="ow">in</span> <span class="n">gas</span><span class="o">.</span><span class="n">reactions</span><span class="p">()]</span>
                            <span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">__is_pdep</span><span class="p">(</span><span class="n">rxn</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">rxn</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">ThreeBodyReaction</span><span class="p">)</span> <span class="ow">or</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">rxn</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">FalloffReaction</span><span class="p">)</span> <span class="ow">or</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">rxn</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">ChemicallyActivatedReaction</span><span class="p">)</span>
        <span class="p">)</span>

<span class="n">num_pdep</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">__is_pdep</span><span class="p">(</span><span class="n">rxn</span><span class="p">)</span>
                         <span class="k">for</span> <span class="n">rxn</span> <span class="ow">in</span> <span class="n">gas</span><span class="o">.</span><span class="n">reactions</span><span class="p">()]</span>
                         <span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1">#create other arrays</span>
<span class="k">def</span> <span class="nf">__czeros</span><span class="p">(</span><span class="n">shape</span><span class="p">):</span>
    <span class="c1">#Return array of zeros in C ordering.</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>

<span class="n">concs</span> <span class="o">=</span> <span class="n">__czeros</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">))</span>
<span class="n">fwd_rates</span> <span class="o">=</span> <span class="n">__czeros</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_reactions</span><span class="p">))</span>
<span class="n">rev_rates</span> <span class="o">=</span> <span class="n">__czeros</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">num_rev</span><span class="p">))</span>
<span class="n">pres_mod</span> <span class="o">=</span> <span class="n">__czeros</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">num_pdep</span><span class="p">))</span>
<span class="n">spec_rates</span> <span class="o">=</span> <span class="n">__czeros</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">))</span>
<span class="n">dydt</span> <span class="o">=</span> <span class="n">__czeros</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">))</span>
<span class="n">jac</span> <span class="o">=</span> <span class="n">__czeros</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span> <span class="o">*</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">))</span>

<span class="c1">#intialize and get padding</span>
<span class="n">N_pad</span> <span class="o">=</span> <span class="n">cu_pyjacob</span><span class="o">.</span><span class="n">py_cuinit</span><span class="p">(</span><span class="n">N_state</span><span class="p">)</span>

<span class="c1">#call jacobian function</span>
<span class="n">cu_pyjacob</span><span class="o">.</span><span class="n">py_cujac</span><span class="p">(</span><span class="n">N_state</span><span class="p">,</span> <span class="n">N_pad</span><span class="p">,</span> <span class="n">pres</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">concs</span><span class="p">,</span>
                        <span class="n">fwd_rates</span><span class="p">,</span> <span class="n">rev_rates</span><span class="p">,</span> <span class="n">pres_mod</span><span class="p">,</span>
                        <span class="n">spec_rates</span><span class="p">,</span> <span class="n">dydt</span><span class="p">,</span> <span class="n">jac</span>
                        <span class="p">)</span>

<span class="c1">#finally reshape arrays for sensible comparison</span>
<span class="n">dydt</span> <span class="o">=</span> <span class="n">dydt</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="n">jac</span> <span class="o">=</span> <span class="n">jac</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">N_state</span><span class="p">,</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span> <span class="o">*</span> <span class="n">gas</span><span class="o">.</span><span class="n">n_species</span><span class="p">),</span>
    <span class="n">order</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this uses the ordering discussed in (<a class="reference internal" href="faqs.html#data-passing"><span class="std std-ref">How do I pass numpy arrays to the C/CUDA pyJac functions from Python?</span></a>), while the
Jacobian values are explained in (<a class="reference internal" href="faqs.html#jac-vals"><span class="std std-ref">What is in the Jacobian?</span></a>).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyJac</a></h1>



<p class="blurb">Python-based generator of analytical Jacobians for chemical kinetics</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=kyleniemeyer&repo=pyjac&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">FAQs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="src/index.html">pyJac API</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Kyle Niemeyer, Nicholas Curtis.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/examples.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/kyleniemeyer/pyjac" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>